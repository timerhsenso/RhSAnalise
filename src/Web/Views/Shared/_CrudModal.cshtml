@*
    ============================================================================
    PARTIAL VIEW REUTILIZÁVEL PARA MODAL DE CRUD
    ============================================================================
    Arquivo: Views/Shared/_CrudModal.cshtml
    
    Partial View genérica para modals de criação/edição.
    Recebe o conteúdo do formulário através de sections.
    
    USO:
    ============================================================================
    
    // Na view Index.cshtml:
    @await Html.PartialAsync("_CrudModal")
    
    @section ModalContent {
        <div class="row">
            <div class="col-md-4 mb-3">
                <label for="CdSistema" class="form-label">
                    <i class="fas fa-barcode me-1"></i>
                    Código do Sistema <span class="text-danger">*</span>
                </label>
                <input type="text" class="form-control" id="CdSistema" name="CdSistema" 
                       maxlength="10" required placeholder="Ex: RH001">
                <small class="text-muted">Código único do sistema (até 10 caracteres)</small>
            </div>
            ...
        </div>
    }
    
    ============================================================================
*@

@{
    var modalId = ViewData["ModalId"]?.ToString() ?? "modalCrud";
    var iconClass = ViewData["IconClass"]?.ToString() ?? "fas fa-edit";
    var entityName = ViewData["EntityName"]?.ToString() ?? "Registro";
}

<!-- Modal para Criar/Editar -->
<div class="modal fade" id="@modalId" tabindex="-1" aria-labelledby="@(modalId)Label" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header modal-header-crud">
                <h5 class="modal-title" id="@(modalId)Label">
                    <i class="@iconClass me-2"></i>
                    <span id="modalTitle">Novo @entityName</span>
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <form id="formCrud">
                @Html.AntiForgeryToken()
                <div class="modal-body">
                    <input type="hidden" id="Id" name="Id" />
                    
                    @RenderSection("ModalContent", required: false)
                </div>
                <div class="modal-footer modal-footer-crud">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                        <i class="fas fa-times me-2"></i>Cancelar
                    </button>
                    <button type="submit" class="btn btn-crud btn-crud-primary">
                        <i class="fas fa-save me-2"></i>Salvar
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Modal para Visualizar -->
<div class="modal fade" id="modalView" tabindex="-1" aria-labelledby="modalViewLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header modal-header-crud">
                <h5 class="modal-title" id="modalViewLabel">
                    <i class="fas fa-eye me-2"></i>
                    Detalhes do @entityName
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" id="viewContent">
                <!-- Conteúdo carregado via AJAX -->
            </div>
            <div class="modal-footer modal-footer-crud">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                    <i class="fas fa-times me-2"></i>Fechar
                </button>
            </div>
        </div>
    </div>
</div>
