{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "RhSensoERP CRUD Configuration",
  "type": "object",
  "required": [ "entities" ],
  "properties": {
    "solutionRoot": {
      "type": "string",
      "description": "Caminho raiz da solution",
      "default": "."
    },
    "apiProject": {
      "type": "string",
      "description": "Caminho do projeto API",
      "default": "src/RhSensoERP.API"
    },
    "webProject": {
      "type": "string",
      "description": "Caminho do projeto Web",
      "default": "src/Web"
    },
    "entities": {
      "type": "array",
      "description": "Lista de entities para geração",
      "items": {
        "$ref": "#/definitions/entity"
      }
    }
  },
  "definitions": {
    "entity": {
      "type": "object",
      "required": [ "name", "displayName", "pluralName", "cdSistema", "cdFuncao", "primaryKey" ],
      "properties": {
        "name": {
          "type": "string",
          "description": "Nome da Entity (ex: Sistema)"
        },
        "displayName": {
          "type": "string",
          "description": "Nome amigável para exibição"
        },
        "pluralName": {
          "type": "string",
          "description": "Nome no plural (ex: Sistemas)"
        },
        "module": {
          "type": "string",
          "description": "Nome do módulo",
          "default": "Identity"
        },
        "tableName": {
          "type": "string",
          "description": "Nome da tabela no banco"
        },
        "cdSistema": {
          "type": "string",
          "description": "Código do sistema para permissões (ex: SEG)"
        },
        "cdFuncao": {
          "type": "string",
          "description": "Código da função para permissões (ex: SEG_FM_TSISTEMA)"
        },
        "primaryKey": {
          "$ref": "#/definitions/primaryKey"
        },
        "properties": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/property"
          }
        },
        "generate": {
          "$ref": "#/definitions/generate"
        }
      }
    },
    "primaryKey": {
      "type": "object",
      "required": [ "property", "type" ],
      "properties": {
        "property": {
          "type": "string",
          "description": "Nome da propriedade PK"
        },
        "type": {
          "type": "string",
          "enum": [ "string", "int", "long", "Guid" ],
          "description": "Tipo C# da PK"
        },
        "column": {
          "type": "string",
          "description": "Nome da coluna no banco"
        }
      }
    },
    "property": {
      "type": "object",
      "required": [ "name", "type" ],
      "properties": {
        "name": {
          "type": "string",
          "description": "Nome da propriedade"
        },
        "type": {
          "type": "string",
          "description": "Tipo C# (ex: string, int, bool, DateTime?)"
        },
        "column": {
          "type": "string",
          "description": "Nome da coluna no banco"
        },
        "displayName": {
          "type": "string",
          "description": "Nome amigável para exibição"
        },
        "maxLength": {
          "type": "integer",
          "description": "Comprimento máximo (strings)"
        },
        "minLength": {
          "type": "integer",
          "description": "Comprimento mínimo (strings)"
        },
        "required": {
          "type": "boolean",
          "description": "Indica se é obrigatório"
        },
        "isPrimaryKey": {
          "type": "boolean",
          "description": "Indica se é a PK"
        },
        "isReadOnly": {
          "type": "boolean",
          "description": "Indica se é somente leitura"
        },
        "defaultValue": {
          "oneOf": [
            { "type": "string" },
            { "type": "boolean" },
            { "type": "integer" },
            { "type": "number" },
            { "type": "null" }
          ],
          "description": "Valor padrão (string, bool, int, etc.)"
        }
      }
    },
    "generate": {
      "type": "object",
      "properties": {
        "apiController": {
          "type": "boolean",
          "default": true
        },
        "webController": {
          "type": "boolean",
          "default": true
        },
        "webModels": {
          "type": "boolean",
          "default": true
        },
        "webServices": {
          "type": "boolean",
          "default": true
        },
        "view": {
          "type": "boolean",
          "default": false
        },
        "javascript": {
          "type": "boolean",
          "default": false
        }
      }
    }
  }
}